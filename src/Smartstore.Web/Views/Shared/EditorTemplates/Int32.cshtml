@using Microsoft.AspNetCore.Routing
@using Smartstore.Utilities

@functions{
    private int? Value
    {
        get
        {
            int? value = null;
            if (ViewData.Model != null)
            {
                value = Convert.ToInt32(ViewData.Model, System.Globalization.CultureInfo.InvariantCulture);
            }
            else
            {
                var htmlAttributes = new RouteValueDictionary(ViewData["htmlAttributes"] ?? new object());
                if (htmlAttributes.TryGetValue("value", out var rawValue))
                {
                    value = Convert.ToInt32(rawValue, System.Globalization.CultureInfo.InvariantCulture);
                }
            }

            return value;
        }
    }
}

@{
    var attributes = new AttributeDictionary().Merge(CommonHelper.ObjectToDictionary(ViewData["htmlAttributes"] ?? new object()));
}

<input type="number"
       asp-for="@Model"
       attrs="attributes"
       sm-decimals="0"
       sm-postfix="@(GetMetadata<string>("postfix"))"
       class="form-control"
       placeholder="@(GetMetadata<string>("placeholder") ?? T("Common.Empty").Value)"
       min="@(GetMetadata<int?>("min"))"
       max="@(GetMetadata<int?>("max"))"
       step="@(GetMetadata<int?>("step") ?? 1)" />